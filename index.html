<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWG Calculator</title>
<link rel="icon" type="image/png" href="icon.png">
<style>
    body {
        background-color: #121212;
        color: #e0e0e0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        text-align: center;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .section {
        background-color: #1e1e1e;
        padding: 20px;
        margin-left: 20px auto; /* Center and margin */
        margin-right: 20px auto;
        margin-top: 5px;
        margin-bottom: 5px;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        box-sizing: border-box;
    }
    h1 {
        color: #5E99F8;
        margin: 0;
        font-size: 2.5rem;
        letter-spacing: 1px;
    }
    h2 {
        color: #aaa;
        margin: 5px 0 0;
        font-weight: 400;
        font-size: 0.9rem;
    }
    .section label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        color: #ccc;
    }
    input {
        padding: 12px;
        font-size: 16px;
        margin: 10px 0;
        border: 1px solid #5E99F888;
        border-radius: 8px;
        outline: none;
        width: 90%;
        text-align: center;
        background-color: rgba(255,255,255,0.05);
        color: white;
        transition: 0.3s;
    }
    input:focus {
        border-color: #5E99F8;
        box-shadow: 0 0 10px #5E99F8;
    }
    button {
        background-color: rgba(0,0,0,0.3);
        color: white;
        padding: 10px 20px;
        margin: 5px;
        border: 2px solid #5E99F8;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s ease;
        font-size: 15px;
    }
    button:hover {
        background-color: #5E99F8;
        color: black;
        box-shadow: 0 0 15px #5E99F8;
    }
    button.active {
        background-color: #5E99F8;
        color: black;
        box-shadow: 0 0 15px #5E99F8;
    }
    .result {
        margin-top: 20px;
        font-size: 24px;
    }
    .swg {
        font-size: 40px;
        font-weight: bold;
        color: #5E99F8;
    }
    table {
        width: 85%;
        margin: 20px auto;
        border-collapse: collapse;
        background-color: rgba(255,255,255,0.03);
        border-radius: 10px;
        overflow: hidden;
    }
    td {
        padding: 10px;
        text-align: center;
        font-size: 14px;
    }
    tr {
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    tr:first-child {
        background-color: rgba(94,153,248,0.15);
        font-weight: bold;
    }
    #lookupTable {
        display: none;
    }
    .footer {
        font-size: 12px;
        color: #bbb;
        margin-top: 30px;
        padding-bottom: 10px;
    }
</style>
</head>
<body>

<div class="section">
    <h1>SWG Calculator</h1>
    <h2>Converts inches to SWG &amp; millimetre</h2>
</div>

<div class="section">
    <label for="inputInches">Micrometer Reading (0.001&quot; scale)</label>
    <input type="number" id="inputInches" placeholder="Example: type 325 for 0.325&quot;" step="1" min="0" inputmode="numeric">
    <div style="margin-top:15px; color:#ccc; font-size:14px;">Select Calculation Mode:</div>
    <button id="bestFit" class="active">Best Fit</button>
    <button id="electricalAccuracy">Electrical Accuracy</button>
</div>

<div class="section">
    <div class="result">
        <div class="swg" id="swgResult">SWG: -</div>
        <div id="mmResult">mm: -</div>
    </div>
</div>

<div class="section">
    <label for="quantity">Quantity (kg)</label>
    <input type="number" id="quantity" placeholder="Enter quantity in kg" min="0" inputmode="numeric">
    <label for="rate">Rate (INR/kg)</label>
    <input type="number" id="rate" placeholder="Enter rate in INR/kg" min="0" inputmode="numeric">
    <div class="result">Cost: <span id="costResult">-</span> INR</div>
</div>

<div class="section">
    <button onclick="toggleTable()">Show/Hide Lookup Table</button>
    <div id="lookupTable"></div>
</div>

<div class="footer">SWG Calculator | Made by Shalini Electricals</div>

<script>
const swgTable = [
    [0, 0.324, 8.23], [1, 0.3, 7.62], [2, 0.276, 7.01], [3, 0.252, 6.4],
    [4, 0.232, 5.89], [5, 0.212, 5.38], [6, 0.192, 4.88], [7, 0.176, 4.47],
    [8, 0.16, 4.06], [9, 0.144, 3.66], [10, 0.128, 3.25], [11, 0.116, 2.95],
    [12, 0.104, 2.64], [13, 0.092, 2.34], [14, 0.08, 2.03], [15, 0.072, 1.83],
    [16, 0.064, 1.63], [17, 0.056, 1.42], [18, 0.048, 1.22], [19, 0.04, 1.02],
    [20, 0.036, 0.91], [21, 0.032, 0.81], [22, 0.028, 0.71], [23, 0.024, 0.61],
    [24, 0.022, 0.56], [25, 0.02, 0.51], [26, 0.018, 0.46], [27, 0.0164, 0.42],
    [28, 0.0148, 0.38], [29, 0.0136, 0.345], [30, 0.0124, 0.315],
    [31, 0.0116, 0.295], [32, 0.0108, 0.274], [33, 0.010, 0.254],
    [34, 0.0092, 0.234], [35, 0.0084, 0.213], [36, 0.0076, 0.193],
    [37, 0.0068, 0.173], [38, 0.006, 0.152], [39, 0.0052, 0.132],
    [40, 0.0048, 0.122]
];

let mode = 'bestFit';

document.getElementById('bestFit').addEventListener('click', () => {
    mode = 'bestFit';
    document.getElementById('bestFit').classList.add('active');
    document.getElementById('electricalAccuracy').classList.remove('active');
    calculateSWG();
});

document.getElementById('electricalAccuracy').addEventListener('click', () => {
    mode = 'electricalAccuracy';
    document.getElementById('electricalAccuracy').classList.add('active');
    document.getElementById('bestFit').classList.remove('active');
    calculateSWG();
});

document.getElementById('inputInches').addEventListener('input', calculateSWG);

document.getElementById('quantity').addEventListener('input', calculateCost);
document.getElementById('rate').addEventListener('input', calculateCost);

function calculateSWG() {
    const inputVal = parseFloat(document.getElementById('inputInches').value);
    if (isNaN(inputVal) || inputVal <= 0) {
        document.getElementById('swgResult').innerText = 'SWG: -';
        document.getElementById('mmResult').innerText = 'mm: -';
        return;
    }

    const inches = inputVal / 1000;
    let closestIndex = swgTable.length - 1;

    for (let i = 0; i < swgTable.length; i++) {
        if (inches >= swgTable[i][1]) {
            if (mode === 'bestFit') {
                const exactMatchIndex = swgTable.findIndex(row => Math.abs(row[1] - inches) < 1e-9);
                if (exactMatchIndex !== -1) {
                    closestIndex = exactMatchIndex;
                } else {
                    const xIndex = i;
                    const yIndex = i - 1 >= 0 ? i - 1 : i;
                    const x = swgTable[xIndex][1];
                    const y = swgTable[yIndex][1];
                    const z = x - y;
                    const threshold = x - 0.2 * z;

                    closestIndex = (inches >= threshold) ? xIndex : yIndex;
                }
            } else {
                const prevDiff = Math.abs(swgTable[i-1]?.[1] - inches);
                const currDiff = Math.abs(swgTable[i][1] - inches);
                closestIndex = (prevDiff < currDiff) ? i-1 : i;
            }
            break;
        }
    }

    document.getElementById('swgResult').innerText = `SWG: ${swgTable[closestIndex][0]}`;
    document.getElementById('mmResult').innerText = `${(inches*25.4).toFixed(3)}`;
}

function calculateCost() {
    const qty = parseFloat(document.getElementById('quantity').value);
    const rate = parseFloat(document.getElementById('rate').value);
    if (isNaN(qty) || isNaN(rate) || qty < 0 || rate < 0) {
        document.getElementById('costResult').innerText = '-';
        return;
    }
    const cost = qty * rate;
    document.getElementById('costResult').innerText = cost.toFixed(2);
}

function toggleTable() {
    const tableDiv = document.getElementById('lookupTable');
    if (tableDiv.style.display === 'none' || tableDiv.style.display === '') {
        let tableHTML = '<table>';
        tableHTML += '<tr><td>SWG</td><td>Inches</td><td>mm</td></tr>';
        swgTable.forEach(row => {
            tableHTML += `<tr><td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td></tr>`;
        });
        tableHTML += '</table>';
        tableDiv.innerHTML = tableHTML;
        tableDiv.style.display = 'block';
    } else {
        tableDiv.style.display = 'none';
    }
}
</script>

</body>
</html>
